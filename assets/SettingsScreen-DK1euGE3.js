import{u as Ne,l as ve,t as r,m as ye,j as e,s as v,c as i,W as we,n as ke,o as Se,p as Ce,q as Fe,r as Ae}from"./index-DUOUId27.js";import{r as n}from"./vendor-state-CIiacWcF.js";import{g as Pe,F as Te,c as Me,u as Ee,d as Ie}from"./fridgeService-CUhaz-Br.js";import{A as We,B as ae,w as Le,x as De,y as Re,z as _e,p as L,m as D,L as re,s as x,G as ie,I as ne,J as Ve,K as Ke,N as Oe,t as R,o as _,O as Ue,V as le,X as ze,Q as Ge}from"./vendor-ui-tYsHGQF9.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-pdf-BScUNyKw.js";import"./vendor-supabase-CywEAasM.js";function Ye({onBack:y}){const{settings:t,updateSettings:o,currentSite:d}=Ne(),[l,h]=n.useState("general"),[u,g]=n.useState(!1),[b,C]=n.useState(null),[de,F]=n.useState(!0),[f,A]=n.useState(""),[V,K]=n.useState(!1),[O,U]=n.useState([]),[w,z]=n.useState(""),[G,ce]=n.useState("staff"),[oe,me]=n.useState(""),[B,$]=n.useState([]),[P,q]=n.useState(""),[H,xe]=n.useState("other"),[k,J]=n.useState([]),[T,Q]=n.useState(""),[X,j]=n.useState(null),[M,E]=n.useState("");n.useEffect(()=>{(async()=>{F(!0);try{const{data:{user:a}}=await v.auth.getUser();if(!a){F(!1);return}const{data:c}=await v.from("profiles").select("current_venue_id").eq("id",a.id).single();if(c?.current_venue_id){const{data:m,error:W}=await v.from("venues").select("id, name").eq("id",c.current_venue_id).single();m&&!W&&(C(m),A(m.name))}else{const{data:m}=await v.from("venues").select("id, name").eq("created_by",a.id).limit(1).single();m&&(C(m),A(m.name))}}catch(a){console.error("Failed to load venue:",a)}finally{F(!1)}})()},[]),n.useEffect(()=>{l==="staff"&&d?.id?Y():l==="food"?Z():l==="fridges"&&d?.id&&I()},[l,d?.id]);const Y=async()=>{if(d?.id){g(!0);try{const s=await ve(d.id);U(s)}catch(s){console.error(s),r.error("Failed to load staff")}finally{g(!1)}}},he=async()=>{if(!d?.id){r.error("Please select a site first");return}if(!w)return;const s=w.split(" ").map(a=>a.charAt(0).toUpperCase()).slice(0,2).join("");try{await Se({site_id:d.id,name:w,initials:s,role:G,pin:oe||null,active:!0}),r.success("Staff member added"),z(""),me(""),Y()}catch{r.error("Failed to add staff")}},pe=async s=>{if(confirm("Are you sure?"))try{await Ce(s),r.success("Staff member removed"),U(a=>a.filter(c=>c.id!==s))}catch{r.error("Failed to remove staff")}},Z=async()=>{g(!0);try{const s=await ye(d?.id);$(s)}catch(s){console.error(s),r.error("Failed to load food presets")}finally{g(!1)}},ue=async()=>{if(P)try{await Fe({site_id:d?.id??null,name:P,category:H}),r.success("Food preset added"),q(""),Z()}catch{r.error("Failed to add food preset")}},ge=async s=>{try{await Ae(s),r.success("Preset removed"),$(a=>a.filter(c=>c.id!==s))}catch{r.error("Failed to remove preset")}},I=async()=>{if(d?.id){g(!0);try{const s=await Pe(d.id);J(s)}catch(s){console.error(s),r.error("Failed to load fridges")}finally{g(!1)}}},S=Te[t.subscriptionTier||"basic"],N=k.length<S,ee=async()=>{if(!d?.id){r.error("Please select a site first");return}if(!T.trim()){r.error("Please enter a fridge name");return}if(!N){r.error(`Upgrade to add more fridges (${t.subscriptionTier} limit: ${S})`);return}try{await Me(d.id,T.trim()),r.success("Fridge added"),Q(""),I()}catch{r.error("Failed to add fridge")}},se=async s=>{if(!M.trim()){j(null);return}try{await Ee(s,{name:M.trim()}),r.success("Fridge renamed"),j(null),E(""),I()}catch{r.error("Failed to rename fridge")}},be=async s=>{if(confirm("Delete this fridge? Historical temperature logs will be preserved."))try{await Ie(s),r.success("Fridge removed"),J(a=>a.filter(c=>c.id!==s))}catch{r.error("Failed to remove fridge")}},fe=s=>{j(s.id),E(s.name)},te=s=>{o({theme:s}),r.success(`Theme set to ${s}`)},je=async s=>{if(o({subscriptionTier:s}),d?.id)try{await ke(d.id,s),r.success(`Subscription updated to ${s}`)}catch(a){console.error("Failed to update subscription in database:",a),r.error("Failed to save subscription to server")}else r.success(`Subscription updated to ${s} (local only)`)};return e.jsxs("div",{className:"min-h-full transition-colors pb-20 lg:pb-6 animate-fade-in text-theme-primary",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-glass-heavy border-b border-theme-primary p-4 md:p-6 backdrop-blur-md",children:e.jsx("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:y,className:"lg:hidden p-3 rounded-xl hover:bg-theme-ghost text-theme-secondary hover:text-theme-primary transition-colors",children:e.jsx(We,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-theme-primary to-theme-secondary flex items-center gap-2",children:"Settings"}),e.jsx("p",{className:"text-sm text-theme-muted",children:"Manage your kitchen configuration"})]})]})})}),e.jsxs("div",{className:"max-w-5xl mx-auto p-4 md:p-6 grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"md:col-span-1 space-y-2",children:[e.jsx(p,{active:l==="general",onClick:()=>h("general"),icon:ae,label:"General"}),e.jsx(p,{active:l==="appearance",onClick:()=>h("appearance"),icon:Le,label:"Appearance"}),e.jsx(p,{active:l==="subscription",onClick:()=>h("subscription"),icon:De,label:"Subscription"}),e.jsx(p,{active:l==="staff",onClick:()=>h("staff"),icon:Re,label:"Staff Members"}),e.jsx(p,{active:l==="food",onClick:()=>h("food"),icon:_e,label:"Food Presets"}),e.jsx(p,{active:l==="voice",onClick:()=>h("voice"),icon:L,label:"Voice Control"}),e.jsx(p,{active:l==="fridges",onClick:()=>h("fridges"),icon:D,label:"Fridges"})]}),e.jsxs("div",{className:"md:col-span-3 space-y-6",children:[l==="general"&&e.jsxs("div",{className:"space-y-6 animate-slide-in",children:[e.jsxs("div",{className:"card-stunning p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-xl bg-emerald-500/10 text-emerald-600",children:e.jsx(ae,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Restaurant Details"}),e.jsx("p",{className:"text-sm text-theme-muted",children:"Configure your venue information."})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold uppercase text-theme-muted",children:"Restaurant Name"}),de?e.jsxs("div",{className:"flex items-center gap-2 h-[56px] px-4 bg-theme-ghost rounded-xl",children:[e.jsx(re,{className:"w-5 h-5 animate-spin text-theme-muted"}),e.jsx("span",{className:"text-theme-muted",children:"Loading..."})]}):e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:s=>A(s.target.value),placeholder:"Enter restaurant name",className:"input-stunning text-xl font-bold flex-1"}),b&&f!==b.name&&e.jsxs("button",{onClick:async()=>{if(!(!b?.id||!f.trim())){K(!0);try{const{error:s}=await v.from("venues").update({name:f.trim(),updated_at:new Date().toISOString()}).eq("id",b.id);if(s)throw s;C({...b,name:f.trim()}),r.success("Restaurant name updated!")}catch(s){console.error("Failed to update venue name:",s),r.error("Failed to save restaurant name")}finally{K(!1)}}},disabled:V,className:"btn-stunning btn-primary px-4",children:[V?e.jsx(re,{className:"w-4 h-4 animate-spin"}):e.jsx(x,{className:"w-4 h-4"}),"Save"]})]}),e.jsx("p",{className:"text-xs text-theme-muted",children:"This name appears in the header and reports."})]})})]}),e.jsxs("div",{className:"card-stunning p-6 border-red-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-xl bg-red-500/10 text-red-600",children:e.jsx(ie,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-red-600",children:"Reset Data"}),e.jsx("p",{className:"text-sm text-theme-muted",children:"Clear local data and start fresh."})]})]}),e.jsxs("div",{className:"bg-red-500/5 border border-red-500/20 rounded-xl p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-red-600 mb-2",children:"âš ï¸ Warning: This will clear all local data including:"}),e.jsxs("ul",{className:"text-xs text-theme-muted space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Cooling sessions"}),e.jsx("li",{children:"Food presets usage counts"}),e.jsx("li",{children:"Settings (API keys will be cleared)"}),e.jsx("li",{children:"Offline queue"})]})]}),e.jsxs("button",{onClick:()=>{confirm("Are you sure you want to reset all local data? This cannot be undone.")&&(localStorage.removeItem("kitchen-compliance-storage"),window.location.reload())},className:"btn-stunning bg-red-500 hover:bg-red-600 text-white px-6",children:[e.jsx(ie,{className:"w-4 h-4"}),"Reset All Data"]})]})]}),l==="subscription"&&e.jsx("div",{className:"space-y-6 animate-slide-in",children:e.jsxs("div",{className:"card-stunning p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 rounded-xl bg-purple-500/10 text-purple-600",children:e.jsx(ne,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Subscription Tier"}),e.jsx("p",{className:"text-sm text-theme-muted",children:"Select a plan to unlock advanced features."})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:["basic","pro","enterprise"].map(s=>e.jsx("div",{onClick:()=>je(s),className:i("cursor-pointer border-2 rounded-xl p-5 transition-all relative group",t.subscriptionTier===s?"border-sky-500 bg-sky-500/5":"border-theme-primary hover:border-theme-secondary"),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"capitalize font-bold text-lg mb-1 flex items-center gap-2",children:[s,e.jsx("span",{className:i("license-badge",s==="basic"?"license-basic":s==="pro"?"license-pro":"license-enterprise"),children:s})]}),s==="basic"&&e.jsx("p",{className:"text-sm text-theme-muted",children:"Core cooling features, single site."}),s==="pro"&&e.jsx("p",{className:"text-sm text-theme-muted",children:"Menu Engineering, Multi-user access."}),s==="enterprise"&&e.jsx("p",{className:"text-sm text-theme-muted",children:"Multi-site management, API Access, Branding."})]}),t.subscriptionTier===s&&e.jsx("div",{className:"p-1 bg-sky-500 rounded-full text-white shadow-lg shadow-sky-500/30",children:e.jsx(x,{className:"w-4 h-4"})})]})},s))})]})}),l==="appearance"&&e.jsx("div",{className:"space-y-6 animate-slide-in",children:e.jsxs("div",{className:"card-stunning p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-6",children:"Interface Theme"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>te("day"),className:i("p-6 rounded-2xl border-2 flex flex-col items-center gap-4 transition-all hover:scale-[1.02]",t.theme==="day"?"border-sky-500 bg-sky-500/5 ring-1 ring-sky-500/50":"border-theme-primary hover:bg-theme-ghost"),children:[e.jsx("div",{className:"p-4 rounded-full bg-orange-100 text-orange-500",children:e.jsx(Ve,{className:"w-8 h-8"})}),e.jsx("span",{className:"font-semibold",children:"Light Mode"})]}),e.jsxs("button",{onClick:()=>te("night"),className:i("p-6 rounded-2xl border-2 flex flex-col items-center gap-4 transition-all hover:scale-[1.02]",t.theme==="night"?"border-indigo-500 bg-indigo-500/5 ring-1 ring-indigo-500/50":"border-theme-primary hover:bg-theme-ghost"),children:[e.jsx("div",{className:"p-4 rounded-full bg-indigo-900/50 text-indigo-300",children:e.jsx(Ke,{className:"w-8 h-8"})}),e.jsx("span",{className:"font-semibold",children:"Dark Mode"})]})]})]})}),l==="staff"&&e.jsxs("div",{className:"space-y-6 animate-slide-in",children:[e.jsxs("div",{className:"card-stunning p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-sky-500"}),"Add Staff Member"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end bg-theme-ghost p-4 rounded-xl border border-theme-primary/50",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase text-theme-muted",children:"Name"}),e.jsx("input",{value:w,onChange:s=>z(s.target.value),placeholder:"e.g. John Doe",className:"input-stunning"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase text-theme-muted",children:"Role"}),e.jsxs("select",{value:G,onChange:s=>ce(s.target.value),className:"input-stunning",children:[e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"chef",children:"Chef"}),e.jsx("option",{value:"manager",children:"Manager"})]})]}),e.jsxs("button",{onClick:he,className:"btn-stunning btn-primary h-[46px]",children:[e.jsx(R,{className:"w-4 h-4"})," Add"]})]})]}),e.jsxs("div",{className:"card-stunning p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Team Members"}),u&&e.jsx("p",{className:"text-theme-muted",children:"Loading staff..."}),!u&&O.length===0&&e.jsx("p",{className:"text-theme-muted",children:"No staff found."}),e.jsx("div",{className:"space-y-3",children:O.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-theme-ghost rounded-xl border border-theme-primary hover:border-theme-secondary transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:i("w-10 h-10 rounded-full flex items-center justify-center font-bold",s.role==="manager"?"bg-purple-100 text-purple-600":s.role==="chef"?"bg-orange-100 text-orange-600":"bg-zinc-100 text-zinc-600"),children:s.name.substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-theme-muted capitalize",children:s.role})]})]}),e.jsx("button",{onClick:()=>pe(s.id),className:"p-2 text-theme-muted hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(_,{className:"w-4 h-4"})})]},s.id))})]})]}),l==="food"&&e.jsxs("div",{className:"space-y-6 animate-slide-in",children:[e.jsxs("div",{className:"card-stunning p-6",children:[e.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-emerald-500"}),"Add Food Preset"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end bg-theme-ghost p-4 rounded-xl border border-theme-primary/50",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase text-theme-muted",children:"Item Name"}),e.jsx("input",{value:P,onChange:s=>q(s.target.value),placeholder:"e.g. Tomato Soup",className:"input-stunning"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-semibold uppercase text-theme-muted",children:"Category"}),e.jsxs("select",{value:H,onChange:s=>xe(s.target.value),className:"input-stunning",children:[e.jsx("option",{value:"soup",children:"Soup"}),e.jsx("option",{value:"sauce",children:"Sauce"}),e.jsx("option",{value:"meat",children:"Meat"}),e.jsx("option",{value:"vegetable",children:"Vegetable"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("button",{onClick:ue,className:"btn-stunning btn-success h-[46px]",children:[e.jsx(R,{className:"w-4 h-4"})," Add"]})]})]}),e.jsxs("div",{className:"card-stunning p-6",children:[e.jsx("h2",{className:"text-lg font-bold mb-4",children:"Preset Menu Items"}),u&&e.jsx("p",{className:"text-theme-muted",children:"Loading presets..."}),!u&&B.length===0&&e.jsx("p",{className:"text-theme-muted",children:"No presets found."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:B.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-theme-ghost rounded-xl border border-theme-primary group",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-theme-card border border-theme-primary capitalize text-theme-muted",children:s.category}),e.jsx("button",{onClick:()=>ge(s.id),className:"p-1 text-theme-muted hover:text-red-500 transition-colors",children:e.jsx(_,{className:"w-4 h-4"})})]})]},s.id))})]})]}),l==="voice"&&e.jsx("div",{className:"space-y-6 animate-slide-in",children:e.jsxs("div",{className:"card-stunning p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"p-4 rounded-full bg-rose-500/10 text-rose-500 animate-pulse",children:e.jsx(L,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Voice Control Settings"}),e.jsx("p",{className:"text-theme-muted",children:"Configure speech recognition provider and API keys."})]})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase text-theme-muted",children:"Speech Recognition Provider"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>o({voiceProvider:"browser"}),className:i("p-4 rounded-xl border-2 transition-all text-left",t.voiceProvider==="browser"?"border-sky-500 bg-sky-500/10":"border-theme-primary hover:border-theme-secondary"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(le,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"font-semibold",children:"Browser"}),t.voiceProvider==="browser"&&e.jsx(x,{className:"w-4 h-4 text-sky-500 ml-auto"})]}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Free, uses Chrome/Safari built-in speech recognition"})]}),e.jsxs("button",{onClick:()=>o({voiceProvider:"openai"}),className:i("p-4 rounded-xl border-2 transition-all text-left",t.voiceProvider==="openai"?"border-sky-500 bg-sky-500/10":"border-theme-primary hover:border-theme-secondary"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ¤–"}),e.jsx("span",{className:"font-semibold",children:"OpenAI Whisper"}),t.voiceProvider==="openai"&&e.jsx(x,{className:"w-4 h-4 text-sky-500 ml-auto"})]}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Whisper API - high accuracy, works in noisy environments"})]}),e.jsxs("button",{onClick:()=>o({voiceProvider:"openrouter"}),className:i("p-4 rounded-xl border-2 transition-all text-left relative",t.voiceProvider==="openrouter"?"border-purple-500 bg-purple-500/10":"border-theme-primary hover:border-theme-secondary opacity-60"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”€"}),e.jsx("span",{className:"font-semibold",children:"OpenRouter"}),e.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-amber-100 text-amber-700 rounded",children:"Beta"}),t.voiceProvider==="openrouter"&&e.jsx(x,{className:"w-4 h-4 text-purple-500 ml-auto"})]}),e.jsx("p",{className:"text-xs text-theme-muted",children:"GPT Audio models - requires streaming (experimental)"})]})]})]}),t.voiceProvider==="openrouter"&&e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase text-theme-muted",children:"Audio Model"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{id:"openai/gpt-audio-mini",name:"GPT Audio Mini",price:"$0.60/M tokens",badge:"Best Value"},{id:"openai/gpt-audio",name:"GPT Audio",price:"$32/M tokens",badge:null},{id:"openai/gpt-4o-audio-preview",name:"GPT-4o Audio",price:"$40/M tokens",badge:"Highest Quality"}].map(s=>e.jsxs("button",{onClick:()=>o({audioModel:s.id}),className:i("p-3 rounded-xl border-2 transition-all text-left flex items-center justify-between",t.audioModel===s.id?"border-purple-500 bg-purple-500/10":"border-theme-primary hover:border-theme-secondary"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium",children:s.name}),s.badge&&e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",s.badge==="Best Value"?"bg-emerald-100 text-emerald-700":"bg-purple-100 text-purple-700"),children:s.badge})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-theme-muted",children:s.price}),t.audioModel===s.id&&e.jsx(x,{className:"w-4 h-4 text-purple-500"})]})]},s.id))})]}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase text-theme-muted",children:"API Keys"}),e.jsxs("div",{className:i("p-4 rounded-xl border transition-all",t.voiceProvider==="openai"?"border-sky-500/50 bg-sky-500/5":"border-theme-primary bg-theme-ghost"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ¤–"}),"OpenAI API Key",t.voiceProvider==="openai"&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-sky-500/20 text-sky-600 rounded-full",children:"Active"})]}),t.openaiApiKey&&e.jsxs("span",{className:"text-xs text-emerald-500 flex items-center gap-1",children:[e.jsx(x,{className:"w-3 h-3"})," Configured"]})]}),e.jsx("input",{type:"password",value:t.openaiApiKey||"",onChange:s=>o({openaiApiKey:s.target.value||null}),placeholder:"sk-...",className:"input-stunning font-mono text-sm"}),e.jsxs("p",{className:"text-xs text-theme-muted mt-2",children:["Get your key at ",e.jsx("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:underline",children:"platform.openai.com/api-keys"})]})]}),e.jsxs("div",{className:i("p-4 rounded-xl border transition-all",t.voiceProvider==="openrouter"?"border-purple-500/50 bg-purple-500/5":"border-theme-primary bg-theme-ghost"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ”€"}),"OpenRouter API Key",t.voiceProvider==="openrouter"&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-500/20 text-purple-600 rounded-full",children:"Active for Voice"})]}),t.openrouterApiKey&&e.jsxs("span",{className:"text-xs text-emerald-500 flex items-center gap-1",children:[e.jsx(x,{className:"w-3 h-3"})," Configured"]})]}),e.jsx("input",{type:"password",value:t.openrouterApiKey||"",onChange:s=>o({openrouterApiKey:s.target.value||null}),placeholder:"sk-or-...",className:"input-stunning font-mono text-sm"}),e.jsxs("p",{className:"text-xs text-theme-muted mt-2",children:["Get your key at ",e.jsx("a",{href:"https://openrouter.ai/keys",target:"_blank",rel:"noopener noreferrer",className:"text-purple-500 hover:underline",children:"openrouter.ai/keys"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase text-theme-muted",children:"Other Settings"}),e.jsxs("div",{onClick:()=>o({ttsEnabled:!t.ttsEnabled}),className:"flex items-center justify-between p-4 bg-theme-ghost rounded-xl cursor-pointer hover:bg-theme-hover transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"text-theme-secondary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Text-to-Speech Feedback"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Read back confirmations aloud"})]})]}),e.jsx("div",{className:i("h-6 w-11 rounded-full relative transition-colors",t.ttsEnabled?"bg-green-500":"bg-theme-input border border-theme-primary"),children:e.jsx("div",{className:i("absolute top-1 w-4 h-4 bg-white rounded-full shadow-sm transition-all",t.ttsEnabled?"right-1":"left-1")})})]}),e.jsxs("div",{onClick:()=>o({wakeWordEnabled:!t.wakeWordEnabled}),className:"flex items-center justify-between p-4 bg-theme-ghost rounded-xl cursor-pointer hover:bg-theme-hover transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:i("transition-colors",t.wakeWordEnabled?"text-rose-500 animate-pulse":"text-theme-secondary")}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Always Listening (Kiosk Mode)"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Say wake word to activate voice commands"})]})]}),e.jsx("div",{className:i("h-6 w-11 rounded-full relative transition-colors",t.wakeWordEnabled?"bg-rose-500":"bg-theme-input border border-theme-primary"),children:e.jsx("div",{className:i("absolute top-1 w-4 h-4 bg-white rounded-full shadow-sm transition-all",t.wakeWordEnabled?"right-1":"left-1")})})]}),t.wakeWordEnabled&&e.jsxs("div",{className:"p-4 bg-theme-ghost rounded-xl border border-rose-500/30 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-rose-400",children:"Wake Words"}),e.jsx("span",{className:"text-xs text-theme-muted",children:"(select one or more)"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:we.map(s=>{const a=t.activeWakeWords?.includes(s.id)??!1;return e.jsx("button",{onClick:()=>{const c=t.activeWakeWords||["luma"];let m;if(a&&c.length>1)m=c.filter(W=>W!==s.id);else if(!a)m=[...c,s.id];else return;o({activeWakeWords:m})},className:i("p-3 rounded-xl border-2 transition-all text-left",a?"border-rose-500 bg-rose-500/10":"border-theme-primary hover:border-theme-secondary opacity-60"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:s.label}),e.jsxs("p",{className:"text-xs text-theme-muted mt-0.5",children:['"Hey ',s.label,'", "OK ',s.label,'"']})]}),a&&e.jsx(x,{className:"w-4 h-4 text-rose-500"})]})},s.id)})}),e.jsx("p",{className:"text-xs text-theme-muted mt-2",children:"ðŸ’¡ Tip: You can enable multiple wake words for flexibility"})]})]})]})}),l==="fridges"&&e.jsx("div",{className:"space-y-6 animate-slide-in",children:e.jsxs("div",{className:"card-stunning p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-cyan-500/10 text-cyan-600",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Fridge Management"}),e.jsxs("p",{className:"text-sm text-theme-muted",children:[k.length," / ",S===1/0?"âˆž":S," fridges",e.jsx("span",{className:i("ml-2 text-xs px-2 py-0.5 rounded-full",t.subscriptionTier==="basic"?"bg-zinc-100 text-zinc-600":t.subscriptionTier==="pro"?"bg-purple-100 text-purple-600":"bg-amber-100 text-amber-600"),children:t.subscriptionTier||"basic"})]})]})]})}),e.jsxs("div",{className:"bg-theme-ghost p-4 rounded-xl border border-theme-primary/50 mb-6",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{value:T,onChange:s=>Q(s.target.value),placeholder:"New fridge name (e.g., Walk-in Cooler)",className:"input-stunning flex-1",onKeyDown:s=>s.key==="Enter"&&ee(),disabled:!N}),e.jsxs("button",{onClick:ee,disabled:!N,className:i("btn-stunning px-6",N?"btn-primary":"opacity-50 cursor-not-allowed"),children:[e.jsx(R,{className:"w-4 h-4"})," Add"]})]}),!N&&e.jsxs("p",{className:"text-xs text-amber-500 mt-2 flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),"Upgrade your subscription to add more fridges"]})]}),u&&e.jsx("p",{className:"text-theme-muted",children:"Loading fridges..."}),!u&&k.length===0&&e.jsxs("div",{className:"text-center py-8 text-theme-muted",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"No fridges configured yet"}),e.jsx("p",{className:"text-sm",children:"Add your first fridge above"})]}),e.jsx("div",{className:"space-y-3",children:k.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-theme-ghost rounded-xl border border-theme-primary hover:border-cyan-500/50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-100 text-cyan-600 flex items-center justify-center font-bold text-lg",children:a+1}),X===s.id?e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{value:M,onChange:c=>E(c.target.value),className:"input-stunning flex-1",autoFocus:!0,onKeyDown:c=>{c.key==="Enter"&&se(s.id),c.key==="Escape"&&j(null)}}),e.jsx("button",{onClick:()=>se(s.id),className:"p-2 text-emerald-500 hover:bg-emerald-50 rounded-lg transition-colors",children:e.jsx(x,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j(null),className:"p-2 text-theme-muted hover:bg-theme-hover rounded-lg transition-colors",children:e.jsx(ze,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-xs text-theme-muted",children:["Target: ",s.min_temp,"Â°C â€“ ",s.max_temp,"Â°C (FSAI SC1)"]})]})]}),X!==s.id&&e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>fe(s),className:"p-2 text-theme-muted hover:text-cyan-500 hover:bg-cyan-50 rounded-lg transition-colors",title:"Rename fridge",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>be(s.id),className:"p-2 text-theme-muted hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete fridge",children:e.jsx(_,{className:"w-4 h-4"})})]})]},s.id))}),t.subscriptionTier==="basic"&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-cyan-500/10 border border-purple-500/20",children:[e.jsx("p",{className:"text-sm font-medium text-purple-600 mb-1",children:"Need more fridges?"}),e.jsxs("p",{className:"text-xs text-theme-muted",children:["Upgrade to ",e.jsx("strong",{children:"Pro"})," for 2 fridges, or ",e.jsx("strong",{children:"Enterprise"})," for unlimited fridges."]}),e.jsx("button",{onClick:()=>h("subscription"),className:"mt-3 text-xs px-3 py-1.5 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"View Plans"})]})]})})]})]})]})}function p({active:y,onClick:t,icon:o,label:d}){return e.jsxs("button",{onClick:t,className:i("w-full flex items-center gap-3 px-4 py-4 rounded-xl text-sm font-medium transition-all duration-200",y?"bg-[var(--inverted-bg)] text-[var(--inverted-text)] shadow-md shadow-black/10 scale-[1.02]":"text-theme-muted hover:bg-theme-ghost hover:text-theme-primary"),children:[e.jsx(o,{className:i("w-5 h-5",y?"text-[var(--inverted-text)]":"text-theme-muted")}),d]})}export{Ye as SettingsScreen};
