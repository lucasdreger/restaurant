var Ce=Object.defineProperty;var Se=(s,t,r)=>t in s?Ce(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var E=(s,t,r)=>Se(s,typeof t!="symbol"?t+"":t,r);import{u as P,j as e,g as ke,t as $,i as me,s as he,a as _e,b as Te,c as Ie}from"./index-264b_u-F.js";import{r as d}from"./vendor-state-CIiacWcF.js";import{c as g,g as Re,f as Me,a as re,C as ie}from"./utils-CBmmx2BN.js";import{Z as Y,C as Ee,S as Ae,a as D,H as xe,P as Oe,b as ue,c as ge,d as pe,e as fe,B as ne,f as be,g as Pe,T as L,h as U,i as ee,j as Le,k as De,l as je,m as G,n as Fe,o as Ve,M as $e,L as Z,V as J,R as z,p as W,X as te,U as Ue,q as Be,r as Ke,s as oe,D as He,t as q,E as We}from"./vendor-ui-tYsHGQF9.js";import{B as ye}from"./Button-DLLDn0q3.js";import{F as Ge,u as ve,a as Ne}from"./useVoiceRecognition-JRWpHVwB.js";import{F as ze,g as qe,l as Qe}from"./fridgeService-Ce6ihapr.js";import"./vendor-react-qkC6yhPU.js";import"./vendor-pdf-BScUNyKw.js";import"./vendor-supabase-CywEAasM.js";const Xe={basic:{label:"Basic",maxVenues:1,icon:Ae},pro:{label:"Pro",maxVenues:5,icon:Ee},enterprise:{label:"Enterprise",maxVenues:999,icon:Y}};function Ye({currentScreen:s,onNavigate:t,siteName:r="Kitchen Ops"}){const{settings:a}=P(),n=a.subscriptionTier||"basic",i=Xe[n],m=i.icon,h=[{id:"home",label:"Command Center",icon:xe,description:"Live monitoring"},{id:"goods_receipt",label:"Goods Receipt",icon:Oe,description:"Delivery intake & OCR",badge:"NEW"},{id:"menu_engineering",label:"Menu Engineering",icon:ue,description:"Cost & Margin Control",badge:"PRO"},{id:"history",label:"Cooling Logs",icon:ge,description:"Session history"},{id:"compliance",label:"FSAI Compliance",icon:pe,description:"Audit reports"},{id:"reports",label:"Analytics",icon:fe,description:"Insights & trends"},{id:"venues",label:"Venues",icon:ne,description:"Multi-site management",badge:n!=="basic"?"NEW":void 0},{id:"settings",label:"Settings",icon:be,description:"Configuration"}];return e.jsxs("aside",{className:"hidden lg:flex flex-col w-72 sidebar-stunning h-screen sticky top-0",children:[e.jsx("div",{className:"p-6 border-b border-theme-primary",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl gradient-primary flex items-center justify-center shadow-lg",children:e.jsx(D,{className:"w-7 h-7 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full bg-green-500 border-2 border-white shadow-lg animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg text-theme-primary tracking-tight",children:"KITCHEN OPS"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-semibold gradient-text",children:"HACCP PRO"}),e.jsxs("span",{className:g("license-badge",n==="basic"&&"license-basic",n==="pro"&&"license-pro",n==="enterprise"&&"license-enterprise"),children:[e.jsx(m,{className:"w-2.5 h-2.5"}),i.label]})]})]})]})}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1.5 overflow-y-auto",children:[e.jsx("p",{className:"px-3 py-2 text-xs font-semibold text-theme-muted uppercase tracking-wider",children:"Main Menu"}),h.slice(0,4).map((c,u)=>{const y=c.icon,N=s===c.id;return e.jsxs("button",{onClick:()=>t(c.id),className:g("sidebar-item w-full text-left animate-slide-in",N&&"active",`stagger-${u+1}`),children:[e.jsx("div",{className:g("p-2 rounded-lg transition-colors",N?"bg-white/20":"bg-theme-ghost"),children:e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:c.label}),c.badge&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-bold gradient-primary text-white rounded",children:c.badge})]}),e.jsx("p",{className:g("text-xs truncate",N?"text-white/70":"text-theme-muted"),children:c.description})]})]},c.id)}),e.jsx("div",{className:"py-3",children:e.jsx("div",{className:"h-px bg-theme-primary"})}),e.jsx("p",{className:"px-3 py-2 text-xs font-semibold text-theme-muted uppercase tracking-wider",children:"Management"}),h.slice(4).map((c,u)=>{const y=c.icon,N=s===c.id,p=c.id==="venues"&&n==="basic";return e.jsxs("button",{onClick:()=>!p&&t(c.id),disabled:p,className:g("sidebar-item w-full text-left animate-slide-in",N&&"active",p&&"opacity-50 cursor-not-allowed",`stagger-${u+5}`),children:[e.jsx("div",{className:g("p-2 rounded-lg transition-colors",N?"bg-white/20":"bg-theme-ghost"),children:e.jsx(y,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium truncate",children:c.label}),c.badge&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-bold gradient-primary text-white rounded",children:c.badge}),p&&e.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-theme-ghost text-theme-muted rounded",children:"PRO"})]}),e.jsx("p",{className:g("text-xs truncate",N?"text-white/70":"text-theme-muted"),children:c.description})]})]},c.id)})]}),e.jsx("div",{className:"p-4 border-t border-theme-primary",children:e.jsxs("div",{className:"card-glass p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-xs font-semibold text-theme-muted uppercase tracking-wide",children:"Active Venue"}),n!=="basic"&&e.jsx("button",{className:"p-1 hover:bg-theme-ghost rounded transition-colors",children:e.jsx(Pe,{className:"w-4 h-4 text-theme-muted"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl gradient-success flex items-center justify-center",children:e.jsx(ne,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-lg shadow-green-500/50"}),e.jsx("span",{className:"font-semibold text-theme-primary text-sm truncate",children:r})]}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Online ‚Ä¢ 0 alerts"})]})]})]})})]})}function Ze({currentScreen:s,onNavigate:t}){const r=[{id:"home",label:"Home",icon:xe},{id:"history",label:"Logs",icon:ge},{id:"compliance",label:"FSAI",icon:pe},{id:"reports",label:"Reports",icon:fe},{id:"settings",label:"Settings",icon:be}];return e.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-glass-heavy border-t border-glass safe-area-bottom z-50",children:e.jsx("div",{className:"flex justify-around items-center h-16 px-1",children:r.map(a=>{const n=a.icon,i=s===a.id;return e.jsxs("button",{onClick:()=>t(a.id),className:g("flex flex-col items-center justify-center gap-0.5 px-3 py-2 rounded-xl transition-all min-w-0 flex-1",i?"text-white":"text-theme-muted"),children:[e.jsx("div",{className:g("p-2 rounded-xl transition-all",i?"gradient-primary shadow-lg":""),children:e.jsx(n,{className:g("w-5 h-5",i&&"scale-110")})}),e.jsx("span",{className:g("text-[10px] font-medium truncate",i?"text-theme-primary":"text-theme-muted"),children:a.label})]},a.id)})})})}function Je({complianceStatus:s="ready",lastAudit:t="Today",autoLogging:r=!0,notificationCount:a=0,onNotificationsClick:n}){const m={ready:{gradient:"gradient-success",bgLight:"bg-green-500/10",text:"text-green-500",icon:ee,label:"INSPECTION READY",sublabel:"FSAI ALIGNED"},warning:{gradient:"gradient-warning",bgLight:"bg-amber-500/10",text:"text-amber-500",icon:U,label:"ATTENTION NEEDED",sublabel:"REVIEW REQUIRED"},critical:{gradient:"gradient-danger",bgLight:"bg-red-500/10",text:"text-red-500",icon:L,label:"ACTION REQUIRED",sublabel:"NON-COMPLIANT"}}[s],h=m.icon;return e.jsxs("header",{className:"bg-glass-heavy border-b border-glass px-4 lg:px-6 py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:g("flex items-center gap-3 px-4 py-3 rounded-xl",m.bgLight),children:[e.jsx("div",{className:g("p-2 rounded-lg",m.gradient),children:e.jsx(Le,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:g("w-4 h-4",m.text)}),e.jsx("p",{className:g("text-sm font-bold",m.text),children:m.label})]}),e.jsxs("p",{className:"text-xs text-theme-muted",children:[m.sublabel," ‚Ä¢ Last Audit: ",t]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[r&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-theme-card rounded-xl border border-theme-primary shadow-theme-sm",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"w-4 h-4 text-green-500"}),e.jsx("div",{className:"absolute inset-0 animate-ping",children:e.jsx(Y,{className:"w-4 h-4 text-green-500 opacity-50"})})]}),e.jsx("span",{className:"text-xs font-semibold text-theme-primary",children:"AUTO-LOGGING"})]}),e.jsxs("button",{onClick:n,className:"relative p-2.5 rounded-xl bg-theme-card border border-theme-primary hover:shadow-theme-md transition-all",title:"View notifications",children:[e.jsx(De,{className:"w-5 h-5 text-theme-secondary"}),a>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 gradient-danger rounded-full text-[10px] text-white font-bold flex items-center justify-center shadow-lg animate-pulse",children:a>9?"9+":a})]})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-theme-primary to-theme-secondary",children:"Kitchen Command Center"}),e.jsx("p",{className:"text-sm text-theme-muted",children:"Real-time cooling compliance monitoring"})]}),e.jsx("div",{className:"flex-1 max-w-md ml-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-theme-muted pointer-events-none z-10"}),e.jsx("input",{type:"text",placeholder:"Search records, items, staff...",className:"input-stunning !pl-10"})]})})]}),e.jsxs("div",{className:"md:hidden mt-4",children:[e.jsx("h1",{className:"text-xl font-bold text-theme-primary",children:"Command Center"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Real-time cooling compliance"})]})]})}function Q({title:s,subtitle:t,value:r,maxValue:a=100,status:n,onClick:i}){const h={complete:{gradient:"gradient-success",bgLight:"bg-green-500/5",progressBg:"gradient-success",text:"text-green-500",icon:ee},"in-progress":{gradient:"gradient-warning",bgLight:"bg-amber-500/5",progressBg:"gradient-warning",text:"text-amber-500",icon:U},pending:{gradient:"bg-theme-ghost",bgLight:"bg-theme-ghost",progressBg:"bg-theme-muted",text:"text-theme-muted",icon:U},warning:{gradient:"gradient-danger",bgLight:"bg-red-500/5",progressBg:"gradient-danger",text:"text-red-500",icon:L}}[n],c=typeof r=="number"?r/a*100:0,u=h.icon;return e.jsxs("button",{onClick:i,className:g("flex-1 min-w-[160px] p-4 rounded-xl text-left transition-all card-stunning","hover:shadow-theme-lg hover:-translate-y-0.5",h.bgLight),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("p",{className:"text-xs font-semibold text-theme-muted uppercase tracking-wide",children:s}),e.jsx(u,{className:g("w-4 h-4",h.text)})]}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-3",children:[e.jsx("span",{className:g("text-3xl font-bold",h.text),children:r}),typeof r=="number"&&e.jsx("span",{className:g("text-lg font-semibold",h.text),children:"%"})]}),typeof r=="number"&&e.jsx("div",{className:"h-2 bg-theme-ghost rounded-full overflow-hidden",children:e.jsx("div",{className:g("h-full rounded-full transition-all duration-700",h.progressBg),style:{width:`${c}%`}})}),t&&e.jsx("p",{className:"text-xs text-theme-muted mt-2 truncate",children:t})]})}function le({session:s,onClose:t,onDiscard:r}){const[a,n]=d.useState(""),[i,m]=d.useState(""),[h,c]=d.useState(0);d.useEffect(()=>{const N=()=>{const p=new Date,b=new Date(s.started_at),v=new Date(s.hard_due_at),S=p.getTime()-b.getTime(),w=Math.floor(S/(1e3*60)),o=Math.floor(w/60),l=w%60;o>0?m(`${o}h ${l}m`):m(`${l}m`);const j=v.getTime()-p.getTime();if(j<=0)n("OVERDUE");else{const C=Math.ceil(j/6e4);C>60?n(`${Math.floor(C/60)}h ${C%60}m`):n(`${C}m`)}const k=v.getTime()-b.getTime(),I=Math.min(100,S/k*100);c(I)};N();const x=setInterval(N,1e4);return()=>clearInterval(x)},[s]);const u=d.useMemo(()=>{switch(s.status){case"active":return{badge:"COOLING",badgeClass:"status-badge-active",cardClass:"cooling-card-active",iconGradient:"gradient-cool",progressGradient:"gradient-success",timerClass:"timer-safe",accent:"text-sky-500"};case"warning":return{badge:"WARNING",badgeClass:"status-badge-warning",cardClass:"cooling-card-warning",iconGradient:"gradient-warning",progressGradient:"gradient-warning",timerClass:"timer-warning",accent:"text-amber-500"};case"overdue":return{badge:"CRITICAL",badgeClass:"status-badge-danger",cardClass:"cooling-card-overdue",iconGradient:"gradient-danger",progressGradient:"gradient-danger",timerClass:"timer-danger",accent:"text-red-500"};default:return{badge:"COOLING",badgeClass:"status-badge-active",cardClass:"cooling-card",iconGradient:"bg-theme-ghost",progressGradient:"bg-theme-muted",timerClass:"",accent:"text-theme-muted"}}},[s.status]),y=()=>({sauce:"ü•Ñ",soup:"üç≤",meat:"ü•©",vegetable:"ü•ó",other:"üçΩÔ∏è"})[s.item_category]||"üçΩÔ∏è";return e.jsxs("div",{className:g("cooling-card",u.cardClass),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:g("w-14 h-14 rounded-xl flex items-center justify-center text-2xl shadow-lg",u.iconGradient),children:e.jsx("span",{className:"drop-shadow-md",children:y()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-theme-primary",children:s.item_name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-theme-muted",children:[e.jsx(G,{className:"w-3 h-3"}),e.jsx("span",{children:"FSAI SC3 Cooling Protocol"})]})]})]}),e.jsxs("span",{className:g("status-badge",u.badgeClass),children:[s.status==="overdue"&&e.jsx(L,{className:"w-3 h-3"}),s.status==="warning"&&e.jsx(U,{className:"w-3 h-3"}),s.status==="active"&&e.jsx(D,{className:"w-3 h-3"}),u.badge]})]}),e.jsx("div",{className:"bg-theme-ghost rounded-xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-theme-muted uppercase tracking-wide mb-1",children:"Elapsed Time"}),e.jsx("span",{className:g("text-4xl font-mono font-bold tracking-tight",u.timerClass),children:i})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-theme-muted uppercase tracking-wide mb-1",children:"Remaining"}),e.jsx("span",{className:g("text-2xl font-mono font-bold",s.status==="overdue"?"text-red-500 animate-pulse":u.accent),children:a})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[e.jsx("span",{className:"text-theme-muted font-medium",children:"2-hour limit progress"}),e.jsxs("span",{className:g("font-bold",u.accent),children:[Math.round(h),"%"]})]}),e.jsx("div",{className:"h-3 bg-theme-ghost rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:g("h-full rounded-full transition-all duration-700 shadow-lg",u.progressGradient),style:{width:`${Math.min(100,h)}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-[10px] text-theme-muted",children:[e.jsx("span",{children:"Start"}),e.jsx("span",{className:"text-amber-500 font-medium",children:"90min"}),e.jsx("span",{className:"text-red-500 font-medium",children:"120min"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-theme-muted mb-4 p-3 bg-theme-ghost/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3"}),e.jsx("span",{children:"Target: <8¬∞C"})]}),e.jsx("div",{className:"h-3 w-px bg-theme-primary"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsx("span",{children:"Max: 2 hours"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>t(s.id),className:g("flex-1 flex items-center justify-center gap-2 px-4 py-3.5 rounded-xl font-bold transition-all","shadow-lg hover:shadow-xl hover:-translate-y-0.5 active:translate-y-0",s.status==="overdue"?"gradient-warning text-white":"gradient-success text-white"),children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Move to Fridge"})]}),e.jsx("button",{onClick:()=>r(s.id),className:"px-4 py-3.5 rounded-xl bg-theme-ghost text-theme-muted hover:bg-red-500/20 hover:text-red-500 transition-all font-medium",title:"Discard item",children:e.jsx(Ve,{className:"w-5 h-5"})})]})]})}class et{constructor(){E(this,"mediaRecorder",null);E(this,"audioChunks",[]);E(this,"stream",null)}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:16e3}}),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:this.getSupportedMimeType()}),this.audioChunks=[],this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&this.audioChunks.push(t.data)},this.mediaRecorder.start(100),console.log("[Voice] Recording started")}catch(t){throw console.error("[Voice] Failed to start recording:",t),new Error("Microphone access denied or unavailable")}}async stop(){return new Promise((t,r)=>{if(!this.mediaRecorder){r(new Error("No recording in progress"));return}this.mediaRecorder.onstop=()=>{const a=new Blob(this.audioChunks,{type:this.getSupportedMimeType()});console.log("[Voice] Recording stopped, blob size:",a.size),this.stream&&(this.stream.getTracks().forEach(n=>n.stop()),this.stream=null),t(a)},this.mediaRecorder.stop()})}cancel(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.audioChunks=[]}get isRecording(){return this.mediaRecorder?.state==="recording"}getSupportedMimeType(){const t=["audio/webm;codecs=opus","audio/webm","audio/mp4","audio/ogg;codecs=opus","audio/wav"];for(const r of t)if(MediaRecorder.isTypeSupported(r))return r;return"audio/webm"}}async function tt(s){return new Promise((t,r)=>{const a=new FileReader;a.onloadend=()=>{const i=a.result.split(",")[1];t(i)},a.onerror=r,a.readAsDataURL(s)})}class st{constructor(t,r="en"){E(this,"apiKey");E(this,"language");this.apiKey=t,this.language=r}async transcribe(t){const r=new FormData,a=this.getExtensionFromMimeType(t.type),n=new File([t],`audio.${a}`,{type:t.type});r.append("file",n),r.append("model","whisper-1"),r.append("language",this.language),r.append("response_format","json"),console.log("[Whisper] Sending audio to OpenAI");try{const i=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`},body:r});if(!i.ok){const h=await i.text();throw console.error("[Whisper] API error:",h),new Error(`Transcription failed: ${i.status}`)}const m=await i.json();return console.log("[Whisper] Transcription result:",m),{text:m.text||"",duration:m.duration}}catch(i){throw console.error("[Whisper] Transcription error:",i),i}}getExtensionFromMimeType(t){return t.includes("webm")?"webm":t.includes("mp4")?"m4a":t.includes("ogg")?"ogg":t.includes("wav")?"wav":"webm"}}class at{constructor(t,r="openai/gpt-audio-mini",a="en"){E(this,"apiKey");E(this,"model");E(this,"language");this.apiKey=t,this.model=r,this.language=a}async transcribe(t){const r=await tt(t),a=t.type||"audio/webm";console.log("[OpenRouter] Sending audio to",this.model,"format:",this.getAudioFormat(a));const n={model:this.model,modalities:["text"],messages:[{role:"user",content:[{type:"input_audio",input_audio:{data:r,format:this.getAudioFormat(a)}},{type:"text",text:`Transcribe this audio exactly. Output only the transcription, nothing else. Language: ${this.language}`}]}]};try{const i=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"ChefKiosk Voice"},body:JSON.stringify(n)});if(!i.ok){const u=await i.text();throw console.error("[OpenRouter] API error:",i.status,u),new Error(`Transcription failed: ${i.status} - ${u}`)}const m=await i.json();console.log("[OpenRouter] Response:",m);const h=m.choices?.[0]?.message;let c="";return typeof h?.content=="string"?c=h.content:Array.isArray(h?.content)&&(c=h.content.find(y=>y.type==="text")?.text||""),{text:c.trim()}}catch(i){throw console.error("[OpenRouter] Transcription error:",i),i}}getAudioFormat(t){return t.includes("webm")?"webm":t.includes("mp4")||t.includes("m4a")?"mp4":t.includes("ogg")?"ogg":t.includes("wav")?"wav":t.includes("mp3")?"mp3":t.includes("flac")?"flac":"webm"}}class rt{constructor(){E(this,"recorder");E(this,"whisperClient",null);E(this,"openRouterClient",null);E(this,"activeProvider",null);E(this,"isInitialized",!1);this.recorder=new et}initialize(t){t.provider==="openai"?(this.whisperClient=new st(t.apiKey,t.language),this.activeProvider="openai",console.log("[Voice] Initialized with OpenAI Whisper")):t.provider==="openrouter"&&(this.openRouterClient=new at(t.apiKey,t.model||"openai/gpt-audio-mini",t.language),this.activeProvider="openrouter",console.log("[Voice] Initialized with OpenRouter",t.model)),this.isInitialized=!0}get isConfigured(){return this.isInitialized&&(this.whisperClient!==null||this.openRouterClient!==null)}get provider(){return this.activeProvider}get isRecording(){return this.recorder.isRecording}async startRecording(){if(!this.isConfigured)throw new Error("Voice service not configured. Please set API key in Settings.");await this.recorder.start()}async stopAndTranscribe(){const t=await this.recorder.stop();if(t.size<1e3)return console.log("[Voice] Audio too short, skipping transcription"),"";if(this.activeProvider==="openai"&&this.whisperClient)return(await this.whisperClient.transcribe(t)).text;if(this.activeProvider==="openrouter"&&this.openRouterClient)return(await this.openRouterClient.transcribe(t)).text;throw new Error("No voice provider configured")}cancelRecording(){this.recorder.cancel()}}const V=new rt;function it(s){const t=s.toLowerCase().trim(),r=[/^(start|begin|new)\s*(cooling|cool)?\s*(.*)$/i,/^cool\s*(.*)$/i,/^cooling\s*(.*)$/i];for(const i of r){const m=t.match(i);if(m){const h=m[m.length-1]?.trim();return{type:"start_cooling",item:Ge.find(u=>u.name.toLowerCase().includes(h)||u.id.includes(h)||h.includes(u.name.toLowerCase()))?.name||h||void 0}}}const a=[/^(stop|done|close|finish|in\s*fridge|fridge)\s*(cooling)?/i,/^cooling\s*(done|finished|complete)/i];for(const i of a)if(i.test(t))return{type:"stop_cooling"};const n=[/^(discard|throw|bin|trash|waste)/i,/^(throw|toss)\s*(it)?\s*(away|out)?/i];for(const i of n)if(i.test(t))return{type:"discard"};return{type:"unknown"}}function we(s={}){const{onCommand:t,onTranscript:r,onError:a}=s,[n,i]=d.useState(!1),[m,h]=d.useState(""),[c,u]=d.useState(null),[y,N]=d.useState(!1),x=d.useRef(!1),{isListening:p,setIsListening:b,settings:v}=P();d.useEffect(()=>{v.voiceProvider==="openai"&&v.openaiApiKey?(V.initialize({apiKey:v.openaiApiKey,provider:"openai",language:v.language||"en"}),i(!0),console.log("[WhisperHook] Initialized with OpenAI Whisper")):v.voiceProvider==="openrouter"&&v.openrouterApiKey?(V.initialize({apiKey:v.openrouterApiKey,provider:"openrouter",model:v.audioModel,language:v.language||"en"}),i(!0),console.log("[WhisperHook] Initialized with OpenRouter",v.audioModel)):i(!1)},[v.voiceProvider,v.openaiApiKey,v.openrouterApiKey,v.audioModel,v.language]);const S=d.useCallback(async()=>{if(!n){const j="Please configure OpenAI API key in Settings to use voice";u(j),a?.(j);return}if(!(p||x.current))try{h(""),u(null),x.current=!0,b(!0),await V.startRecording(),console.log("[WhisperHook] Recording started")}catch(j){const k=j instanceof Error?j.message:"Failed to start recording";console.error("[WhisperHook] Start error:",k),u(k),a?.(k),x.current=!1,b(!1)}},[n,p,b,a]),w=d.useCallback(async()=>{if(x.current)try{N(!0),x.current=!1;const j=await V.stopAndTranscribe();if(console.log("[WhisperHook] Transcription:",j),h(j),r?.(j),j){const k=it(j);console.log("[WhisperHook] Parsed command:",k),t?.(k)}}catch(j){const k=j instanceof Error?j.message:"Transcription failed";console.error("[WhisperHook] Stop error:",k),u(k),a?.(k)}finally{N(!1),b(!1)}},[b,t,r,a]),o=d.useCallback(async()=>{p||x.current?await w():await S()},[p,S,w]),l=d.useCallback(()=>{V.cancelRecording(),x.current=!1,b(!1)},[b]);return{isSupported:!0,isConfigured:n,isListening:p,isProcessing:y,transcript:m,error:c,startListening:S,stopListening:w,toggleListening:o,cancelListening:l}}const nt=d.forwardRef(function({onCommand:t,onEnd:r,className:a,size:n="lg",wakeWordActive:i=!1,wakeWordTriggered:m=!1,wakeWordLabel:h="Hey Luma"},c){const{speak:u}=ve(),{settings:y}=P(),N=y.voiceProvider==="openai"&&y.openaiApiKey||y.voiceProvider==="openrouter"&&y.openrouterApiKey,x=y.voiceProvider==="openai"?"OpenAI Whisper":y.voiceProvider==="openrouter"?`OpenRouter (${y.audioModel?.split("/")[1]||"gpt-audio-mini"})`:"Browser",p=d.useCallback(R=>{console.log("[VoiceButton] Command received:",R),R.type==="start_cooling"?u(`Starting cooling${R.item?` for ${R.item}`:""}`):R.type==="stop_cooling"?u("Cooling complete, moved to fridge"):R.type==="discard"?u("Item discarded"):u("Sorry, I didn't understand that"),t(R)},[t,u]),b=d.useCallback(()=>{console.log("[VoiceButton] Voice ended"),r?.()},[r]),v=Ne({onCommand:p,onError:R=>{console.error("[BrowserVoice] Error:",R),b()}}),S=we({onCommand:p,onError:R=>{console.error("[WhisperVoice] Error:",R),b()}}),w=N?S:v,{isSupported:o,isListening:l,transcript:j,error:k,toggleListening:I,startListening:C}=w,_=N?S.isProcessing:!1;d.useImperativeHandle(c,()=>({triggerVoice:()=>{console.log("[VoiceButton] Triggered via ref (wake word)"),!l&&!_&&(C?C():I())}}),[l,_,C,I]),d.useEffect(()=>{m&&!l&&!_&&(console.log("[VoiceButton] Wake word triggered - starting voice"),C?C():I())},[m,l,_,C,I]),d.useEffect(()=>{if(!l&&!_&&j){const R=setTimeout(()=>{b()},500);return()=>clearTimeout(R)}},[l,_,j,b]);const O={sm:"w-12 h-12",md:"w-20 h-20",lg:"w-28 h-28"},A={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-14 h-14"};return!o&&!N?e.jsxs("div",{className:g("flex flex-col items-center justify-center gap-2 text-theme-muted",a),children:[e.jsx($e,{className:A[n]}),n!=="sm"&&e.jsx("span",{className:"text-sm",children:"Voice not supported"})]}):n==="sm"?e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:I,disabled:_,className:g("voice-button rounded-full flex items-center justify-center transition-all duration-200",O[n],_?"bg-purple-500 shadow-lg shadow-purple-500/50":l?"voice-listening bg-green-500 shadow-lg shadow-green-500/50":i?"bg-gradient-to-b from-rose-600 to-rose-700 hover:from-rose-500 hover:to-rose-600 shadow-lg shadow-rose-500/30":"bg-gradient-to-b from-theme-ghost to-theme-secondary hover:from-theme-secondary hover:to-theme-ghost shadow-lg","active:scale-95 disabled:opacity-50",a),"aria-label":l?"Stop listening":"Start voice command",children:_?e.jsx(Z,{className:g(A[n],"text-white animate-spin")}):l?e.jsx(J,{className:g(A[n],"text-white animate-pulse")}):i?e.jsx(z,{className:g(A[n],"text-white animate-pulse")}):e.jsx(W,{className:g(A[n],"text-white")})}),i&&!l&&!_&&e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-rose-500 rounded-full animate-pulse"})]}):e.jsxs("div",{className:g("flex flex-col items-center gap-3",a),children:[i&&!l&&!_&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-rose-500/20 rounded-full border border-rose-500/30",children:[e.jsx(z,{className:"w-4 h-4 text-rose-400 animate-pulse"}),e.jsxs("span",{className:"text-xs text-rose-400 font-medium",children:['Say "',h,'"']})]}),e.jsx("button",{onClick:I,disabled:_,className:g("voice-button rounded-full flex items-center justify-center transition-all duration-200",O[n],_?"bg-purple-500 shadow-lg shadow-purple-500/50":l?"voice-listening bg-green-500 shadow-lg shadow-green-500/50":i?"bg-gradient-to-b from-rose-600 to-rose-700 hover:from-rose-500 hover:to-rose-600 shadow-lg shadow-rose-500/30 ring-2 ring-rose-500/50":"bg-gradient-to-b from-theme-ghost to-theme-secondary hover:from-theme-secondary hover:to-theme-ghost shadow-lg","active:scale-95 disabled:opacity-70"),"aria-label":l?"Stop listening":"Start voice command",children:_?e.jsx(Z,{className:g(A[n],"text-white animate-spin")}):l?e.jsx(J,{className:g(A[n],"text-white animate-pulse")}):i?e.jsx(z,{className:g(A[n],"text-white animate-pulse")}):e.jsx(W,{className:g(A[n],"text-white")})}),e.jsxs("div",{className:"text-center min-h-[60px]",children:[_&&e.jsx("p",{className:"text-purple-400 font-medium",children:"üîÑ Processing..."}),l&&!_&&e.jsx("p",{className:"text-green-400 font-medium animate-pulse",children:"üé§ Listening..."}),j&&!l&&!_&&e.jsxs("p",{className:"text-theme-muted text-sm max-w-[200px]",children:['Heard: "',j,'"']}),k&&!l&&!_&&e.jsx("div",{className:"text-amber-400 text-sm max-w-[220px]",children:e.jsxs("p",{children:["‚ö†Ô∏è ",k]})}),!l&&!j&&!k&&!_&&e.jsx("p",{className:"text-theme-muted text-sm",children:i?`Listening for "${h}"`:N?"Tap to record":"Tap to speak"})]}),e.jsxs("div",{className:"text-center text-xs text-theme-muted max-w-[250px]",children:[e.jsx("p",{className:"font-medium mb-1",children:"Say:"}),e.jsx("p",{children:'"Start cooling [item]"'}),e.jsx("p",{children:'"Done" or "In fridge"'}),e.jsx("p",{children:'"Discard"'}),N&&e.jsxs("p",{className:"mt-2 text-purple-400",children:["Using ",x]})]})]})});function ot({onCommand:s,className:t}){const{settings:r}=P(),a=r.voiceProvider==="openai"&&r.openaiApiKey||r.voiceProvider==="openrouter"&&r.openrouterApiKey,n=Ne({onCommand:s}),i=we({onCommand:s}),m=a?i:n,{isSupported:h,isListening:c,toggleListening:u}=m,y=a?i.isProcessing:!1;return!h&&!a?null:e.jsx("button",{onClick:u,disabled:y,className:g("p-3 rounded-xl transition-all duration-200",y?"bg-purple-500 text-white shadow-lg shadow-purple-500/50":c?"bg-green-500 text-white shadow-lg shadow-green-500/50":"bg-theme-ghost text-theme-secondary hover:bg-theme-secondary","disabled:opacity-50",t),"aria-label":c?"Stop listening":"Start voice command",children:y?e.jsx(Z,{className:"w-6 h-6 animate-spin"}):c?e.jsx(J,{className:"w-6 h-6 animate-pulse"}):e.jsx(W,{className:"w-6 h-6"})})}function lt({isOpen:s,onClose:t,onStart:r}){const{foodPresets:a,incrementFoodUsage:n}=P(),[i,m]=d.useState(null),[h,c]=d.useState(""),[u,y]=d.useState(""),N=d.useMemo(()=>ke(a),[a]),x=d.useMemo(()=>{let o=N;if(i&&(o=o.filter(l=>l.category===i)),u.trim()){const l=u.toLowerCase();o=o.filter(j=>j.name.toLowerCase().includes(l))}return!i&&!u.trim()&&(o=o.slice(0,12)),o},[N,i,u]);if(!s)return null;const p=[{id:"sauce",label:"Sauces",icon:"ü•´"},{id:"soup",label:"Soups",icon:"üç≤"},{id:"meat",label:"Meats",icon:"ü•©"},{id:"vegetable",label:"Veg",icon:"ü•ó"},{id:"other",label:"Other",icon:"üì¶"}],b=o=>{n(o.id),r(o.name,o.category),S()},v=()=>{h.trim()&&(r(h.trim(),i||"other"),S())},S=()=>{m(null),c(""),y(""),t()},w=o=>{if(o.type==="start_cooling"&&o.item){const l=a.find(j=>j.name.toLowerCase().includes(o.item.toLowerCase()));l?(n(l.id),r(l.name,l.category)):r(o.item,"other"),S()}};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:S}),e.jsxs("div",{className:"relative w-full sm:max-w-2xl h-[95vh] sm:h-auto sm:max-h-[90vh] overflow-hidden bg-theme-modal rounded-t-3xl sm:rounded-3xl shadow-2xl animate-slide-in border border-theme-primary",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-theme-primary",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-sky-500/20 rounded-xl",children:e.jsx(D,{className:"w-6 h-6 text-sky-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-theme-primary",children:"Start Cooling"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Select food item"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ot,{onCommand:w}),e.jsx("button",{onClick:S,className:"p-3 hover:bg-theme-ghost rounded-xl transition-colors text-theme-primary",children:e.jsx(te,{className:"w-6 h-6"})})]})]}),e.jsx("div",{className:"px-4 py-3 border-b border-theme-primary",children:e.jsxs("div",{className:"relative",children:[e.jsx(je,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-theme-muted pointer-events-none z-10"}),e.jsx("input",{type:"text",value:u,onChange:o=>y(o.target.value),placeholder:"Search food items...",className:"input-stunning !pl-11"})]})}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto p-3 border-b border-theme-primary scrollbar-hide",children:[e.jsx("button",{onClick:()=>m(null),className:g("flex-shrink-0 px-5 py-3 rounded-xl font-semibold transition-all min-w-[80px] text-center",i?"bg-theme-ghost text-theme-secondary hover:bg-theme-elevated active:scale-95":"bg-sky-500 text-white shadow-lg shadow-sky-500/30"),children:"Top Used"}),p.map(o=>e.jsxs("button",{onClick:()=>m(o.id),className:g("flex-shrink-0 px-5 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 min-w-[80px] justify-center",i===o.id?"bg-sky-500 text-white shadow-lg shadow-sky-500/30":"bg-theme-ghost text-theme-secondary hover:bg-theme-elevated active:scale-95"),children:[e.jsx("span",{className:"text-lg",children:o.icon}),e.jsx("span",{className:"hidden sm:inline",children:o.label})]},o.id))]}),e.jsxs("div",{className:"p-4 overflow-y-auto flex-1",style:{maxHeight:"calc(95vh - 280px)"},children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-4",children:x.map(o=>e.jsxs("button",{onClick:()=>b(o),className:"flex flex-col items-center justify-center gap-2 p-5 bg-theme-card hover:bg-theme-elevated border border-theme-primary rounded-2xl transition-all active:scale-95 min-h-[100px] touch-manipulation",children:[e.jsx("span",{className:"text-4xl",children:o.icon}),e.jsx("span",{className:"font-semibold text-center text-sm leading-tight text-theme-primary",children:o.name}),(o.use_count||0)>0&&e.jsxs("span",{className:"text-[10px] text-theme-muted",children:["Used ",o.use_count,"x"]})]},o.id))}),x.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-theme-secondary",children:"No items found"}),e.jsx("p",{className:"text-sm text-theme-muted mt-1",children:"Try a different search or add custom item"})]}),e.jsxs("div",{className:"border-t border-theme-primary pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ue,{className:"w-5 h-5 text-theme-muted"}),e.jsx("span",{className:"text-sm text-theme-muted",children:"Custom item:"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:o=>c(o.target.value),placeholder:"e.g., Mushroom risotto",className:"flex-1 px-4 py-4 bg-theme-input border border-theme-input rounded-xl text-theme-primary placeholder:text-theme-muted focus:outline-none focus:border-sky-500 text-lg",onKeyDown:o=>{o.key==="Enter"&&v()}}),e.jsx(ye,{variant:"cooling",size:"lg",onClick:v,disabled:!h.trim(),className:"px-6",children:"Start"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-theme-primary bg-theme-secondary safe-area-bottom",children:e.jsx("p",{className:"text-center text-sm text-theme-secondary",children:"üí° Timer starts immediately ‚Ä¢ Move to fridge within 2 hours"})})]})]})}const ct=[2,4,5,6,7,8];function dt({isOpen:s,onClose:t,onConfirm:r,session:a}){const{staffMembers:n}=P(),[i,m]=d.useState(void 0),[h,c]=d.useState(""),[u,y]=d.useState(null),[N,x]=d.useState(!1),p=d.useMemo(()=>n.filter(C=>C.active),[n]),b=d.useCallback(()=>{const C=N&&h?parseFloat(h):i;r({temperature:C,staffId:u?.id,staffName:u?.name}),m(void 0),c(""),y(null),x(!1)},[i,h,u,N,r]),v=d.useCallback(()=>{m(void 0),c(""),y(null),x(!1),t()},[t]);if(!s||!a)return null;const S=Re(new Date(a.started_at)),w=Math.floor(S/60),o=a.status==="overdue",l=a.status==="warning",j=N&&h?parseFloat(h):i,k=j!==void 0&&j<8,I=j!==void 0&&j>=8;return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:v}),e.jsxs("div",{className:"relative w-full sm:max-w-lg bg-theme-card rounded-t-3xl sm:rounded-2xl shadow-2xl border border-theme-primary max-h-[95vh] overflow-y-auto animate-slide-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-theme-primary",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl",children:e.jsx(D,{className:"w-6 h-6 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-theme-primary",children:"Move to Fridge"}),e.jsx("p",{className:"text-sm text-theme-muted",children:"FSAI SC3 - Cooling Record"})]})]}),e.jsx("button",{onClick:v,className:"p-3 hover:bg-theme-hover rounded-xl transition-colors",children:e.jsx(te,{className:"w-6 h-6 text-theme-muted"})})]}),e.jsxs("div",{className:"p-4 space-y-5",children:[e.jsx("div",{className:g("p-4 rounded-xl border",o?"bg-red-500/10 border-red-500/30":l?"bg-amber-500/10 border-amber-500/30":"bg-theme-secondary border-theme-primary"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-theme-primary text-xl",children:a.item_name}),e.jsxs("p",{className:"text-sm text-theme-muted",children:["Cooling time: ",Me(S)," (",w,"m)"]})]}),o&&e.jsxs("div",{className:"flex items-center gap-1 text-red-400",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Overdue"})]}),l&&!o&&e.jsxs("div",{className:"flex items-center gap-1 text-amber-400",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Warning"})]}),!o&&!l&&e.jsxs("div",{className:"flex items-center gap-1 text-emerald-400",children:[e.jsx(ee,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"On time"})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-theme-secondary mb-3",children:[e.jsx(Ue,{className:"w-4 h-4 text-purple-400"}),"Who's recording?"]}),p.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map(C=>e.jsxs("button",{onClick:()=>y(C),className:g("p-4 rounded-xl transition-all flex flex-col items-center justify-center gap-1 min-h-[80px] touch-manipulation",u?.id===C.id?"bg-purple-500 text-white ring-2 ring-purple-400":"bg-theme-secondary text-theme-secondary hover:bg-theme-hover active:scale-95"),children:[e.jsx("span",{className:"text-2xl font-bold",children:C.initials}),e.jsx("span",{className:"text-xs truncate max-w-full",children:C.name})]},C.id))}):e.jsxs("div",{className:"p-4 bg-theme-secondary rounded-xl text-center",children:[e.jsx("p",{className:"text-theme-muted text-sm mb-2",children:"No staff members configured"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Add staff in Settings ‚Üí Staff"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-theme-secondary mb-3",children:[e.jsx(G,{className:"w-4 h-4 text-sky-400"}),"Final Temperature (¬∞C)",e.jsx("span",{className:"text-theme-muted",children:"- should be <8¬∞C"})]}),N?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",inputMode:"decimal",step:"0.1",value:h,onChange:C=>c(C.target.value),placeholder:"Enter temperature",className:g("w-full p-5 text-3xl font-mono text-center bg-theme-secondary text-theme-primary border rounded-xl focus:outline-none focus:ring-2 transition-all",h&&parseFloat(h)>=8?"border-amber-500 focus:ring-amber-500":"border-theme-primary focus:ring-sky-500"),autoFocus:!0}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-2xl text-theme-muted",children:"¬∞C"})]}),e.jsx("button",{onClick:()=>{x(!1),c("")},className:"w-full py-3 text-sm text-theme-muted hover:text-theme-secondary transition-colors bg-theme-secondary rounded-xl",children:"Use preset temperatures"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-6 gap-2 mb-3",children:ct.map(C=>e.jsxs("button",{onClick:()=>m(C),className:g("py-5 rounded-xl text-xl font-bold transition-all touch-manipulation active:scale-95",i===C?C<8?"bg-emerald-500 text-white ring-2 ring-emerald-400":"bg-amber-500 text-white ring-2 ring-amber-400":"bg-theme-secondary text-theme-secondary hover:bg-theme-hover"),children:[C,"¬∞"]},C))}),e.jsx("button",{onClick:()=>x(!0),className:"w-full py-3 text-sm text-theme-muted hover:text-theme-secondary transition-colors bg-theme-secondary rounded-xl",children:"Enter custom temperature"})]}),I&&e.jsxs("div",{className:"mt-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl flex items-start gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-300",children:"Temperature is ‚â•8¬∞C. FSAI requires food to be cooled to <8¬∞C within 2 hours. Consider continuing to cool or document exception."})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-theme-primary space-y-3 safe-area-bottom",children:[e.jsxs(ye,{variant:"primary",size:"kiosk",fullWidth:!0,onClick:b,className:g("flex items-center justify-center gap-2 py-5",k&&"bg-emerald-600 hover:bg-emerald-500"),children:[e.jsx(D,{className:"w-6 h-6"}),e.jsx("span",{className:"font-bold text-lg",children:j!==void 0?`Confirm at ${j}¬∞C`:"Confirm Move to Fridge"})]}),j===void 0&&e.jsx("button",{onClick:b,className:"w-full py-3 text-sm text-theme-muted hover:text-theme-secondary transition-colors",children:"Skip temperature (not recommended)"})]})]})]})}function mt({isOpen:s,onClose:t,onSuccess:r}){const{currentSite:a,settings:n,staffMembers:i}=P(),[m,h]=d.useState([]),[c,u]=d.useState(0),[y,N]=d.useState(""),[x,p]=d.useState(!1),[b,v]=d.useState(!1),S=ze[n.subscriptionTier]||1;d.useEffect(()=>{s&&a?.id&&w()},[s,a?.id]);const w=async()=>{if(a?.id)try{const T=await qe(a.id);h(T.slice(0,S))}catch(T){console.error("Failed to load fridges:",T),h([{id:"demo-fridge-1",site_id:a.id,name:"Main Fridge",sort_order:0,min_temp:0,max_temp:5,active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}])}},o=m[c],l=y?parseFloat(y):null,j=l!==null&&l>=0&&l<=5,k=l!==null&&(l<0||l>5),I=d.useCallback(T=>{if(!(y.length>=4))if(T==="."){if(y.includes("."))return;N(f=>f+".")}else if(T==="-"){if(y.length>0)return;N("-")}else{if(y.includes(".")){const[,f]=y.split(".");if(f&&f.length>=1)return}N(f=>f+T)}},[y]),C=d.useCallback(()=>{N(T=>T.slice(0,-1))},[]),_=d.useCallback(()=>{N("")},[]),O=async()=>{if(!(!a?.id||!o||l===null)){p(!0);try{await Qe({site_id:a.id,fridge_id:o.id,temperature:l,recorded_by_name:i[0]?.name||void 0}),v(!0),$.success(`${o.name}: ${l}¬∞C logged`),m.length>1&&c<m.length-1?setTimeout(()=>{u(T=>T+1),N(""),v(!1)},800):setTimeout(()=>{v(!1),N(""),u(0),r?.(),t()},1e3)}catch(T){console.error("Failed to log temperature:",T),$.error("Failed to log temperature")}finally{p(!1)}}},A=()=>{c>0&&(u(T=>T-1),N(""))},R=()=>{c<m.length-1&&(u(T=>T+1),N(""))};return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"w-full max-w-md mx-4 bg-theme-card rounded-3xl shadow-2xl overflow-hidden border border-theme-primary",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-theme-primary",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:g("p-2 rounded-xl",j?"bg-emerald-500/20 text-emerald-400":k?"bg-red-500/20 text-red-400":"bg-sky-500/20 text-sky-400"),children:e.jsx(G,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-theme-primary",children:"Log Fridge Temp"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"FSAI SC1 Compliance"})]})]}),e.jsx("button",{onClick:t,className:"p-2 text-theme-muted hover:text-theme-primary hover:bg-theme-ghost rounded-xl transition-colors",children:e.jsx(te,{className:"w-6 h-6"})})]}),m.length>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-theme-secondary",children:[e.jsx("button",{onClick:A,disabled:c===0,className:"p-2 rounded-xl disabled:opacity-30 hover:bg-theme-ghost transition-colors",children:e.jsx(Be,{className:"w-5 h-5 text-theme-secondary"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-semibold text-theme-primary",children:o?.name}),e.jsxs("p",{className:"text-xs text-theme-muted",children:[c+1," of ",m.length]})]}),e.jsx("button",{onClick:R,disabled:c===m.length-1,className:"p-2 rounded-xl disabled:opacity-30 hover:bg-theme-ghost transition-colors",children:e.jsx(Ke,{className:"w-5 h-5 text-theme-secondary"})})]}),m.length===1&&o&&e.jsx("div",{className:"px-4 py-3 bg-theme-secondary text-center",children:e.jsx("p",{className:"text-sm font-semibold text-theme-primary",children:o.name})}),e.jsxs("div",{className:"p-6 flex flex-col items-center",children:[e.jsx("div",{className:g("w-full py-6 px-4 rounded-2xl text-center transition-colors",b?"bg-emerald-500/20 border-2 border-emerald-500":k?"bg-red-500/10 border-2 border-red-500":j?"bg-emerald-500/10 border-2 border-emerald-500/50":"bg-theme-secondary border-2 border-theme-primary"),children:b?e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(oe,{className:"w-12 h-12 text-emerald-400"}),e.jsx("span",{className:"text-lg text-emerald-400 font-semibold",children:"Logged!"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-5xl font-bold text-theme-primary font-mono min-h-[60px]",children:[y||e.jsx("span",{className:"text-theme-muted",children:"‚Äî"}),y&&e.jsx("span",{className:"text-3xl ml-1 text-theme-muted",children:"¬∞C"})]}),k&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-red-400",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Out of range (0-5¬∞C)"})]}),j&&l!==null&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3 text-emerald-400",children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Compliant"})]})]})}),e.jsx("div",{className:"mt-3 text-xs text-theme-muted text-center",children:"Target range: 0¬∞C to 5¬∞C"})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[["7","8","9","4","5","6","1","2","3"].map(T=>e.jsx("button",{onClick:()=>I(T),className:"h-16 text-2xl font-bold bg-theme-ghost hover:bg-theme-secondary active:bg-theme-input text-theme-primary rounded-xl transition-colors border border-theme-primary",children:T},T)),e.jsx("button",{onClick:()=>I("-"),className:"h-16 text-2xl font-bold bg-theme-ghost hover:bg-theme-secondary active:bg-theme-input text-theme-primary rounded-xl transition-colors border border-theme-primary",children:"‚àí"}),e.jsx("button",{onClick:()=>I("0"),className:"h-16 text-2xl font-bold bg-theme-ghost hover:bg-theme-secondary active:bg-theme-input text-theme-primary rounded-xl transition-colors border border-theme-primary",children:"0"}),e.jsx("button",{onClick:()=>I("."),className:"h-16 text-2xl font-bold bg-theme-ghost hover:bg-theme-secondary active:bg-theme-input text-theme-primary rounded-xl transition-colors border border-theme-primary",children:"."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[e.jsx("button",{onClick:_,className:"h-12 text-sm font-semibold bg-theme-secondary hover:bg-theme-ghost text-theme-secondary rounded-xl transition-colors border border-theme-primary",children:"Clear"}),e.jsx("button",{onClick:C,className:"h-12 flex items-center justify-center bg-theme-secondary hover:bg-theme-ghost text-theme-secondary rounded-xl transition-colors border border-theme-primary",children:e.jsx(He,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"p-4 pt-0",children:e.jsx("button",{onClick:O,disabled:l===null||x||b,className:g("w-full py-4 rounded-xl font-bold text-lg transition-all",l!==null&&!x?"bg-emerald-500 hover:bg-emerald-400 active:bg-emerald-600 text-white shadow-lg shadow-emerald-500/30":"bg-theme-ghost text-theme-muted cursor-not-allowed"),children:x?"Saving...":"Log Temperature"})})]})}):null}const M=[];for(let s=0;s<256;++s)M.push((s+256).toString(16).slice(1));function ht(s,t=0){return(M[s[t+0]]+M[s[t+1]]+M[s[t+2]]+M[s[t+3]]+"-"+M[s[t+4]]+M[s[t+5]]+"-"+M[s[t+6]]+M[s[t+7]]+"-"+M[s[t+8]]+M[s[t+9]]+"-"+M[s[t+10]]+M[s[t+11]]+M[s[t+12]]+M[s[t+13]]+M[s[t+14]]+M[s[t+15]]).toLowerCase()}let X;const xt=new Uint8Array(16);function ut(){if(!X){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");X=crypto.getRandomValues.bind(crypto)}return X(xt)}const gt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ce={randomUUID:gt};function pt(s,t,r){s=s||{};const a=s.random??s.rng?.()??ut();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,ht(a)}function se(s,t,r){return ce.randomUUID&&!s?ce.randomUUID():pt(s)}function ft(s,t,r,a){const n=new Date,i=new Date(n.getTime()+ie.SOFT_LIMIT_MINUTES*60*1e3),m=new Date(n.getTime()+ie.HARD_LIMIT_MINUTES*60*1e3);return{id:se(),item_name:s,item_category:t,started_at:n.toISOString(),soft_due_at:i.toISOString(),hard_due_at:m.toISOString(),status:"active",site_id:r,created_by:a,synced:!1}}function B(s,t,r,a={}){return{id:se(),session_id:s,site_id:t,event_type:r,timestamp:new Date().toISOString(),payload:a,synced:!1}}function de(s,t,r){const a=t==="warning"?`‚ö†Ô∏è ${r} cooling for 90 minutes - check soon!`:`üö® ${r} OVERDUE - action required NOW!`;return{id:se(),session_id:s,type:t,message:a,triggered_at:new Date().toISOString(),acknowledged:!1}}async function K(s){if(!me())return console.log("Supabase not configured, skipping sync"),!1;try{const{error:t}=await he.from("cooling_sessions").upsert({id:s.id,site_id:s.site_id,item_name:s.item_name,item_category:s.item_category,started_at:s.started_at,soft_due_at:s.soft_due_at,hard_due_at:s.hard_due_at,closed_at:s.closed_at,status:s.status,close_action:s.close_action,start_temperature:s.start_temperature,end_temperature:s.end_temperature,started_by_id:s.started_by_id,staff_name:s.staff_name,closed_by:s.closed_by,closed_by_id:s.closed_by_id,food_item_id:s.food_item_id,exception_reason:s.exception_reason,exception_approved_by:s.exception_approved_by,created_by:s.created_by});if(t)throw t;return!0}catch(t){return console.error("Failed to sync session to Supabase:",t),!1}}async function H(s){if(!me())return console.log("Supabase not configured, skipping sync"),!1;try{const{error:t}=await he.from("cooling_events").insert({id:s.id,session_id:s.session_id,site_id:s.site_id,event_type:s.event_type,timestamp:s.timestamp,payload:s.payload});if(t)throw t;return!0}catch(t){return console.error("Failed to sync event to Supabase:",t),!1}}function bt(){const{coolingSessions:s,addCoolingSession:t,updateCoolingSession:r,addAlert:a,addToOfflineQueue:n,currentSite:i,isOnline:m}=P();return{startCooling:async(x,p="other")=>{if(!i)return console.error("No site selected"),null;const b=ft(x,p,i.id);t(b);const v=B(b.id,i.id,"started",{item_name:x,item_category:p});return m?await K(b)&&(r(b.id,{synced:!0}),await H(v)):n(v),b},closeCooling:async(x,p)=>{const b=s.find(k=>k.id===x);if(!b||!i)return!1;const v=new Date().toISOString(),S=re(new Date(b.started_at)),w=S==="overdue"?"overdue":"closed",o=Math.floor((Date.now()-new Date(b.started_at).getTime())/(1e3*60)),l={closed_at:v,status:w,close_action:"in_fridge",end_temperature:p?.temperature,closed_by_id:p?.staffId,closed_by:p?.staffName};r(x,l);const j=B(x,i.id,"closed",{close_action:"in_fridge",was_overdue:S==="overdue",elapsed_minutes:o,end_temperature:p?.temperature,closed_by:p?.staffName,temperature_compliant:p?.temperature!==void 0?p.temperature<8:void 0});return m?await K({...b,...l})&&(r(x,{synced:!0}),await H(j)):n(j),!0},discardCooling:async(x,p)=>{const b=s.find(o=>o.id===x);if(!b||!i)return!1;const S={closed_at:new Date().toISOString(),status:"discarded",close_action:"discarded",exception_reason:p};r(x,S);const w=B(x,i.id,"discarded",{reason:p,elapsed_minutes:Math.floor((Date.now()-new Date(b.started_at).getTime())/(1e3*60))});return m?await K({...b,...S})&&(r(x,{synced:!0}),await H(w)):n(w),!0},addException:async(x,p,b)=>{const v=s.find(l=>l.id===x);if(!v||!i)return!1;const w={closed_at:new Date().toISOString(),status:"closed",close_action:"exception",exception_reason:p,exception_approved_by:b};r(x,w);const o=B(x,i.id,"exception_added",{reason:p,approved_by:b,elapsed_minutes:Math.floor((Date.now()-new Date(v.started_at).getTime())/(1e3*60))});return m?await K({...v,...w})&&(r(x,{synced:!0}),await H(o)):n(o),!0},updateSessionStatuses:()=>{s.forEach(x=>{if(x.closed_at)return;const p=re(new Date(x.started_at));p!==x.status&&(r(x.id,{status:p}),p==="warning"&&x.status==="active"?a(de(x.id,"warning",x.item_name)):p==="overdue"&&x.status!=="overdue"&&a(de(x.id,"overdue",x.item_name)))})},coolingSessions:s}}function Rt({onNavigate:s,currentScreen:t="home"}){const[r,a]=d.useState(!1),[n,i]=d.useState(null),[m,h]=d.useState(!1),{coolingSessions:c,currentSite:u,alerts:y,acknowledgeAlert:N}=P(),{startCooling:x,closeCooling:p,discardCooling:b,updateSessionStatuses:v}=bt(),{speak:S}=ve(),w=d.useMemo(()=>_e(c),[c]),o=d.useMemo(()=>Te(c),[c]),l=d.useMemo(()=>Ie(y),[y]),j=d.useMemo(()=>c.find(f=>f.id===n)||null,[c,n]);d.useEffect(()=>{const f=setInterval(v,1e4);return()=>clearInterval(f)},[v]);const k=d.useMemo(()=>o.length>0?"critical":w.some(f=>f.status==="warning")?"warning":"ready",[w,o]),I=d.useCallback(async(f,F)=>{await x(f,F)&&S(`Cooling started for ${f}`)},[x,S]),C=d.useCallback(f=>{i(f)},[]),_=d.useCallback(async f=>{if(!n)return;if(await p(n,f)){const ae=f.temperature!==void 0?` at ${f.temperature}¬∞C`:"";S(`Item moved to fridge${ae}. Well done!`),i(null)}},[n,p,S]),O=d.useCallback(async f=>{await b(f)&&S("Item discarded and logged")},[b,S]),A=d.useCallback(f=>{switch(f.type){case"start_cooling":f.item?I(f.item,"other"):a(!0);break;case"stop_cooling":w.length>0&&C(w[0].id);break;case"discard":w.length>0&&O(w[0].id);break}},[w,I,C,O]),R=d.useCallback(f=>{s?.(f)},[s]),T=d.useCallback(()=>{if(l.length===0){$.info("No new notifications");return}l.forEach((f,F)=>{setTimeout(()=>{f.type==="overdue"?$.error(f.message,{duration:5e3}):$.warning(f.message,{duration:5e3}),N(f.id)},F*500)})},[l,N]);return e.jsxs("div",{className:"min-h-screen bg-theme-primary flex",children:[e.jsx(Ye,{currentScreen:t,onNavigate:R,siteName:u?.name||"Kitchen Ops"}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[e.jsx(Je,{complianceStatus:k,lastAudit:"Today",autoLogging:!0,notificationCount:l.length,onNotificationsClick:T}),e.jsxs("main",{className:"flex-1 p-4 lg:p-6 pb-24 lg:pb-6 overflow-auto",children:[e.jsx("section",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-cyan-500/20 to-sky-500/20 border-2 border-cyan-500/50 rounded-2xl hover:border-cyan-400 hover:from-cyan-500/30 hover:to-sky-500/30 transition-all group",children:[e.jsx("div",{className:"p-3 rounded-xl bg-cyan-500/20 text-cyan-500 group-hover:bg-cyan-500/30 transition-colors",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-bold text-theme-primary text-lg",children:"Log Fridge Temp"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"FSAI SC1 Compliance"})]})]}),e.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-sky-500/20 to-blue-500/20 border-2 border-sky-500/50 rounded-2xl hover:border-sky-400 hover:from-sky-500/30 hover:to-blue-500/30 transition-all group",children:[e.jsx("div",{className:"p-3 rounded-xl bg-sky-500/20 text-sky-500 group-hover:bg-sky-500/30 transition-colors",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-bold text-theme-primary text-lg",children:"Start Cooling"}),e.jsx("p",{className:"text-xs text-theme-muted",children:"Track hot food"})]})]})]})}),e.jsxs("section",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-emerald-500",children:"‚úì"}),e.jsx("h2",{className:"text-sm font-semibold text-theme-secondary uppercase tracking-wide",children:"Daily Compliance Cycles"})]}),e.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide",children:[e.jsx(Q,{title:"Cooling Records",value:w.length>0?65:100,status:w.length>0?"in-progress":"complete",subtitle:w.length>0?`${w.length} active`:"All complete"}),e.jsx(Q,{title:"Mid-Day Logs",value:65,status:"in-progress",subtitle:"Next: 15:00 Probe Test"}),e.jsx(Q,{title:"Closing Routine",value:"Pending",status:"pending",subtitle:"Starts at 22:30 PM"})]})]}),o.length>0&&e.jsxs("section",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-red-500"}),e.jsx("h2",{className:"text-sm font-semibold text-red-600 uppercase tracking-wide",children:"Critical Actions"}),e.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-bold rounded-full",children:[o.length," ALERT",o.length>1?"S":""]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:o.map(f=>e.jsx(le,{session:f,onClose:C,onDiscard:O},f.id))})]}),e.jsxs("section",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-sky-500"}),e.jsx("h2",{className:"text-sm font-semibold text-theme-secondary uppercase tracking-wide",children:"Active Cooling Monitors"}),w.length>0&&e.jsx("span",{className:"px-2 py-0.5 bg-sky-100 text-sky-700 text-xs font-bold rounded-full",children:w.filter(f=>f.status!=="overdue").length})]}),e.jsxs("button",{className:"text-sm text-sky-600 font-medium hover:underline flex items-center gap-1",children:[e.jsx(We,{className:"w-4 h-4"}),"View All"]})]}),w.filter(f=>f.status!=="overdue").length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:w.filter(f=>f.status!=="overdue").map(f=>e.jsx(le,{session:f,onClose:C,onDiscard:O},f.id))}):e.jsxs("div",{className:"bg-theme-card rounded-2xl border border-theme-primary p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-theme-secondary flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"w-8 h-8 text-theme-muted"})}),e.jsx("h3",{className:"text-lg font-semibold text-theme-primary mb-2",children:"No Active Cooling"}),e.jsx("p",{className:"text-theme-secondary mb-6 max-w-sm mx-auto",children:"All items have been processed. Start a new cooling session when needed."}),e.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-sky-500 text-white rounded-xl font-semibold hover:bg-sky-600 transition-colors",children:[e.jsx(q,{className:"w-5 h-5"}),"Start Cooling"]})]})]}),e.jsxs("section",{className:"bg-theme-card rounded-2xl border border-theme-primary p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(W,{className:"w-5 h-5 text-purple-500"}),e.jsx("h2",{className:"text-sm font-semibold text-theme-secondary uppercase tracking-wide",children:"Voice Commands"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[e.jsx(nt,{onCommand:A,size:"md"}),e.jsxs("div",{className:"text-sm text-theme-secondary space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-purple-500",children:'"Start cooling [item]"'})," - Begin tracking"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-emerald-500",children:'"Done"'})," or ",e.jsx("span",{className:"font-medium text-emerald-500",children:'"In fridge"'})," - Complete session"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium text-red-500",children:'"Discard"'})," - Log waste"]})]})]})]})]}),e.jsx("button",{onClick:()=>a(!0),className:"lg:hidden fixed right-4 bottom-20 w-14 h-14 rounded-full bg-sky-500 text-white shadow-lg shadow-sky-500/30 flex items-center justify-center hover:bg-sky-600 transition-all active:scale-95 z-40",children:e.jsx(q,{className:"w-6 h-6"})})]}),e.jsx(Ze,{currentScreen:t,onNavigate:R}),e.jsx(lt,{isOpen:r,onClose:()=>a(!1),onStart:I}),e.jsx(dt,{isOpen:n!==null,onClose:()=>i(null),onConfirm:_,session:j}),e.jsx(mt,{isOpen:m,onClose:()=>h(!1)})]})}export{Rt as Dashboard};
