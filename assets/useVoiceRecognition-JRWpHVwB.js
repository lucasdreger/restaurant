import{r as e}from"./vendor-state-CIiacWcF.js";import{u as T}from"./index-264b_u-F.js";const V=[{id:"bolognese",name:"Bolognese Sauce",icon:"ðŸ",category:"sauce",use_count:0},{id:"tomato-sauce",name:"Tomato Sauce",icon:"ðŸ…",category:"sauce",use_count:0},{id:"bechamel",name:"BÃ©chamel",icon:"ðŸ¥›",category:"sauce",use_count:0},{id:"gravy",name:"Gravy",icon:"ðŸ¥„",category:"sauce",use_count:0},{id:"curry-sauce",name:"Curry Sauce",icon:"ðŸ›",category:"sauce",use_count:0},{id:"soup",name:"Soup",icon:"ðŸ²",category:"soup",use_count:0},{id:"stock",name:"Stock",icon:"ðŸ«•",category:"soup",use_count:0},{id:"stew",name:"Stew",icon:"ðŸ¥˜",category:"soup",use_count:0},{id:"chili",name:"Chili",icon:"ðŸŒ¶ï¸",category:"soup",use_count:0},{id:"roast-beef",name:"Roast Beef",icon:"ðŸ¥©",category:"meat",use_count:0},{id:"chicken",name:"Chicken",icon:"ðŸ—",category:"meat",use_count:0},{id:"pulled-pork",name:"Pulled Pork",icon:"ðŸ–",category:"meat",use_count:0},{id:"lamb",name:"Lamb",icon:"ðŸ‘",category:"meat",use_count:0},{id:"vegetables",name:"Cooked Vegetables",icon:"ðŸ¥—",category:"vegetable",use_count:0},{id:"rice",name:"Rice",icon:"ðŸš",category:"other",use_count:0},{id:"pasta",name:"Pasta",icon:"ðŸœ",category:"other",use_count:0},{id:"other",name:"Other",icon:"ðŸ“¦",category:"other",use_count:0}],v=V;function I(s){const r=s.toLowerCase().trim(),i=[/^(start|begin|new)\s*(cooling|cool)?\s*(.*)$/i,/^cool\s*(.*)$/i,/^cooling\s*(.*)$/i];for(const t of i){const d=r.match(t);if(d){const a=d[d.length-1]?.trim();return{type:"start_cooling",item:v.find(m=>m.name.toLowerCase().includes(a)||m.id.includes(a)||a.includes(m.name.toLowerCase()))?.name||a||void 0}}}const c=[/^(stop|done|close|finish|in\s*fridge|fridge)\s*(cooling)?/i,/^cooling\s*(done|finished|complete)/i];for(const t of c)if(t.test(r))return{type:"stop_cooling"};const f=[/^(discard|throw|bin|trash|waste)/i,/^(throw|toss)\s*(it)?\s*(away|out)?/i];for(const t of f)if(t.test(r))return{type:"discard"};return{type:"unknown"}}function x(s={}){const{onCommand:r,onTranscript:i,onError:c,language:f="en-IE"}=s,[t,d]=e.useState(!1),[a,n]=e.useState(""),[m,y]=e.useState(null),h=e.useRef(null),_=e.useRef(r),R=e.useRef(i),C=e.useRef(c);e.useEffect(()=>{_.current=r},[r]),e.useEffect(()=>{R.current=i},[i]),e.useEffect(()=>{C.current=c},[c]);const{isListening:g,setIsListening:S}=T();e.useEffect(()=>{const p=window.SpeechRecognition||window.webkitSpeechRecognition;d(!!p)},[]),e.useEffect(()=>{if(!t)return;const p=window.SpeechRecognition||window.webkitSpeechRecognition,u=new p;return u.continuous=!1,u.interimResults=!1,u.lang=f,u.onstart=()=>{console.log("[Voice] Recognition started - listening for speech..."),S(!0),y(null)},u.onend=()=>{console.log("[Voice] Recognition ended"),S(!1)},u.onresult=w=>{const o=w.results[w.resultIndex];if(console.log("[Voice] Got result:",o),o.isFinal){const l=o[0].transcript;console.log("[Voice] Final transcript:",l),n(l),R.current?.(l);const E=I(l);console.log("[Voice] Parsed command:",E),console.log("[Voice] Calling onCommand callback..."),_.current?.(E)}},u.onerror=w=>{let o,l=!0;switch(w.error){case"aborted":o="Voice recognition stopped",l=!1;break;case"no-speech":o="No speech detected. Tap the mic and speak clearly.";break;case"audio-capture":o="Microphone not found. Check your device settings.";break;case"not-allowed":o="Microphone access denied. Please allow microphone access in your browser settings.";break;case"network":o="Network error. Voice recognition requires an internet connection.";break;case"service-not-allowed":o="Speech service not available. Try using Chrome or Edge browser.";break;default:o=`Voice error: ${w.error}`}y(l?o:null),S(!1),l&&C.current?.(o)},h.current=u,()=>{u.abort()}},[t,f,S]);const k=e.useCallback(()=>{if(!(!h.current||g))try{n(""),y(null),h.current.start()}catch(p){console.error("Failed to start voice recognition:",p),y("Failed to start voice recognition")}},[g]),b=e.useCallback(()=>{if(!(!h.current||!g))try{h.current.stop()}catch(p){console.error("Failed to stop voice recognition:",p)}},[g]),P=e.useCallback(()=>{g?b():k()},[g,k,b]);return{isSupported:t,isListening:g,transcript:a,error:m,startListening:k,stopListening:b,toggleListening:P}}function O(){const[s,r]=e.useState(!1),[i,c]=e.useState(!1);e.useEffect(()=>{r("speechSynthesis"in window)},[]);const f=e.useCallback((d,a={})=>{if(!s||i)return;const n=new SpeechSynthesisUtterance(d);n.rate=a.rate||1.1,n.pitch=a.pitch||1,n.lang="en-IE",n.onstart=()=>c(!0),n.onend=()=>c(!1),n.onerror=()=>c(!1),window.speechSynthesis.speak(n)},[s,i]),t=e.useCallback(()=>{s&&(window.speechSynthesis.cancel(),c(!1))},[s]);return{isSupported:s,isSpeaking:i,speak:f,cancel:t}}export{v as F,x as a,O as u};
